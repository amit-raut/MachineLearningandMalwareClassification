__author__ = 'AR'
import json, sys, subprocess, string, os, time

if len(os.sys.argv) < 5:
    print "Usage: ./ntTraceextractor -f <source for binaries> -o <destination for strace files>"
    os.sys.exit()

for i in xrange(len(sys.argv)):
	if sys.argv[i] == '-f':
		sourcePath = sys.argv[i + 1]
	if sys.argv[i] == '-o':
		destPath = sys.argv[i + 1]		

########## Execute the command as child process ##########
def executeChildProcess(command):
    modifiedCommand = 'strace ' + command
    with open(destPath + str(command)[len(sourcePath) + 2: len(sourcePath) + 6] + '.trace', 'a') as f:
        ps = subprocess.Popen(modifiedCommand, stderr=f, stdout=subprocess.PIPE, shell=True)

        time.sleep(1)
	ps.terminate()

def main():
    


if __name__=="__main__":
    print '{:*^70}'.format(" Machine Learning and Malware Classification ")
    main()
    print '{:*^70}'.format('All Strace stored to ' + destPath + ' directory')
    print
    print '{:*^70}'.format(" EOP ")